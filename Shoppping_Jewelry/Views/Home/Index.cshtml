@model IEnumerable<ProductModel>

<div class="col-sm-3">
	@Html.Partial("_Sidebar")
</div>

<div class="col-sm-9 padding-right">
	<div class="features_items">
		<!--features_items-->
		<h2 class="title text-center">Danh sách sản phẩm</h2>
		@if (TempData["SuccessMessage"] != null)
		{
			<div id="notification" class="alert alert-success" style="position: fixed; top: 20px; left: 50%; transform: translateX(-50%); z-index: 1000;">
				@TempData["SuccessMessage"]
			</div>
			<script>
				setTimeout(function() {
					document.getElementById('notification').style.display = 'none';
				}, 3000); // Thông báo sẽ tự động biến mất sau 3 giây
			</script>
		}
		@foreach (var item in Model)
		{

			<div class="col-sm-4">
				<div class="product-image-wrapper">
				<div class="single-products">
					<div class="productinfo text-center">
						<a asp-action="Details" asp-controller="Product" asp-route-Id="@item.Id">
							<td><img src="~/media/products/@item.Image" width="100%" /></td>
								<h2>@item.Price.ToString("#,##0 VNĐ")</h2>
							<p>@item.Name</p>
							<p>Danh mục: @item.Category.Name</p>
							<p>Thương hiệu: @item.Brand.Name</p>
						</a>
							<button class="btn btn-default add-to-cart" data-product_id="@item.Id"><i class="fa fa-shopping-cart"></i>Thêm giỏ hàng</button>
						@* <a class="btn btn-default add-to-cart" asp-action="Add" asp-controller="Cart" asp-route-Id="@item.Id"><i class="fa fa-shopping-cart"></i>Add to cart</a> *@
					</div>
				</div>
			</div>
		</div>
		}
	</div>
</div>

@section Scripts {
	<script>
		
			$('.add-to-cart').click(function () {
				var Id = $(this).data("product_id");

				//alert(product_id);

				$.ajax({
					type: "POST",
					url: "@Url.Action("Add","Cart")",
					data: { Id: Id }, // Send data to the server

					success: function (result) {
						// Handle successful update
						if (result) {

							Swal.fire("Thêm giỏ hàng thành công.");
						} 
					}

				});
			});
		
	</script>
}